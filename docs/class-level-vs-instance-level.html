<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 31 Class-level vs Instance-level | Python Tutorial</title>
<meta name="author" content="Hank Lee">
<meta name="description" content="31.1 Instance-level attribute vs Class-level attribute  31.1.1 簡介實例屬性與類屬性 首先我們看一下這個例子： class Student:   count = 0 # class-level attribute   def __init__(self, name):   self.name = name #...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 31 Class-level vs Instance-level | Python Tutorial">
<meta property="og:type" content="book">
<meta property="og:description" content="31.1 Instance-level attribute vs Class-level attribute  31.1.1 簡介實例屬性與類屬性 首先我們看一下這個例子： class Student:   count = 0 # class-level attribute   def __init__(self, name):   self.name = name #...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 31 Class-level vs Instance-level | Python Tutorial">
<meta name="twitter:description" content="31.1 Instance-level attribute vs Class-level attribute  31.1.1 簡介實例屬性與類屬性 首先我們看一下這個例子： class Student:   count = 0 # class-level attribute   def __init__(self, name):   self.name = name #...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Python Tutorial</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introduction</a></li>
<li class="book-part">環境設置與執行</li>
<li><a class="" href="python-environmental-setting.html"><span class="header-section-number">1</span> Python Environmental Setting</a></li>
<li><a class="" href="%E5%9F%B7%E8%A1%8Cpython%E7%9A%84code.html"><span class="header-section-number">2</span> 執行Python的code</a></li>
<li><a class="" href="%E8%A8%BB%E8%A7%A3%E8%88%87indention.html"><span class="header-section-number">3</span> 註解與indention</a></li>
<li><a class="" href="print.html"><span class="header-section-number">4</span> print</a></li>
<li><a class="" href="variables.html"><span class="header-section-number">5</span> Variables</a></li>
<li class="book-part">Python Basic Data Types</li>
<li><a class="" href="python-data-types.html"><span class="header-section-number">6</span> Python Data Types</a></li>
<li><a class="" href="int-float-%E6%95%B4%E7%90%86%E8%88%87%E5%AF%A6%E6%88%B0.html"><span class="header-section-number">7</span> int &amp; float 整理與實戰</a></li>
<li><a class="" href="string%E6%95%B4%E7%90%86%E8%88%87%E5%AF%A6%E6%88%B0.html"><span class="header-section-number">8</span> string整理與實戰</a></li>
<li class="book-part">Python Collections</li>
<li><a class="" href="collections-overview.html"><span class="header-section-number">9</span> collections overview</a></li>
<li><a class="" href="list%E6%95%B4%E7%90%86%E8%88%87%E5%AF%A6%E6%88%B0.html"><span class="header-section-number">10</span> list整理與實戰</a></li>
<li><a class="" href="tuple%E6%95%B4%E7%90%86%E8%88%87%E5%AF%A6%E6%88%B0.html"><span class="header-section-number">11</span> tuple整理與實戰</a></li>
<li><a class="" href="dictionary%E6%95%B4%E7%90%86%E8%88%87%E5%AF%A6%E6%88%B0.html"><span class="header-section-number">12</span> dictionary整理與實戰</a></li>
<li><a class="" href="set%E6%87%89%E7%94%A8%E5%AF%A6%E6%88%B0.html"><span class="header-section-number">13</span> set應用實戰</a></li>
<li class="book-part">條件判斷</li>
<li><a class="" href="none.html"><span class="header-section-number">14</span> None</a></li>
<li><a class="" href="boolean%E6%95%B4%E7%90%86%E8%88%87%E5%AF%A6%E6%88%B0.html"><span class="header-section-number">15</span> boolean整理與實戰</a></li>
<li><a class="" href="conditional-operators.html"><span class="header-section-number">16</span> Conditional Operators</a></li>
<li><a class="" href="if-statement.html"><span class="header-section-number">17</span> If statement</a></li>
<li class="book-part">Loops</li>
<li><a class="" href="for-loop.html"><span class="header-section-number">18</span> for loop</a></li>
<li><a class="" href="while-loop.html"><span class="header-section-number">19</span> while loop</a></li>
<li class="book-part">Functions</li>
<li><a class="" href="function101.html"><span class="header-section-number">20</span> function101</a></li>
<li><a class="" href="exception-handling.html"><span class="header-section-number">21</span> Exception Handling</a></li>
<li><a class="" href="flexible-arguments.html"><span class="header-section-number">22</span> flexible arguments</a></li>
<li><a class="" href="recursion.html"><span class="header-section-number">23</span> recursion</a></li>
<li><a class="" href="function%E5%B0%B1%E6%98%AF%E5%8F%A6%E4%B8%80%E7%A8%AEtype%E7%9A%84object.html"><span class="header-section-number">24</span> Function就是另一種type的object</a></li>
<li><a class="" href="nested-function.html"><span class="header-section-number">25</span> Nested Function</a></li>
<li><a class="" href="variable-scope-1.html"><span class="header-section-number">26</span> Variable Scope</a></li>
<li><a class="" href="closure.html"><span class="header-section-number">27</span> closure</a></li>
<li><a class="" href="decorator.html"><span class="header-section-number">28</span> decorator</a></li>
<li><a class="" href="functional-programming.html"><span class="header-section-number">29</span> functional programming</a></li>
<li class="book-part">Object Oriented Programming</li>
<li><a class="" href="oop-fundamentals.html"><span class="header-section-number">30</span> OOP Fundamentals</a></li>
<li><a class="active" href="class-level-vs-instance-level.html"><span class="header-section-number">31</span> Class-level vs Instance-level</a></li>
<li><a class="" href="attribute-protection.html"><span class="header-section-number">32</span> Attribute Protection</a></li>
<li><a class="" href="isinstance-equality-%E8%88%87-string-representation.html"><span class="header-section-number">33</span> isinstance, equality, 與 string representation</a></li>
<li><a class="" href="encapsulation-inheritacne-and-polymorphism.html"><span class="header-section-number">34</span> Encapsulation, Inheritacne, and Polymorphism</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/LeeHank/python_tutorial">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="class-level-vs-instance-level" class="section level1" number="31">
<h1>
<span class="header-section-number">31</span> Class-level vs Instance-level<a class="anchor" aria-label="anchor" href="#class-level-vs-instance-level"><i class="fas fa-link"></i></a>
</h1>
<div id="instance-level-attribute-vs-class-level-attribute" class="section level2" number="31.1">
<h2>
<span class="header-section-number">31.1</span> Instance-level attribute vs Class-level attribute<a class="anchor" aria-label="anchor" href="#instance-level-attribute-vs-class-level-attribute"><i class="fas fa-link"></i></a>
</h2>
<div id="簡介實例屬性與類屬性" class="section level3" number="31.1.1">
<h3>
<span class="header-section-number">31.1.1</span> 簡介<code>實例屬性</code>與<code>類屬性</code><a class="anchor" aria-label="anchor" href="#%E7%B0%A1%E4%BB%8B%E5%AF%A6%E4%BE%8B%E5%B1%AC%E6%80%A7%E8%88%87%E9%A1%9E%E5%B1%AC%E6%80%A7"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>首先我們看一下這個例子：</li>
</ul>
<div class="sourceCode" id="cb357"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb357-1"><a href="class-level-vs-instance-level.html#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Student:</span>
<span id="cb357-2"><a href="class-level-vs-instance-level.html#cb357-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb357-3"><a href="class-level-vs-instance-level.html#cb357-3" aria-hidden="true" tabindex="-1"></a>  count <span class="op">=</span> <span class="dv">0</span> <span class="co"># class-level attribute</span></span>
<span id="cb357-4"><a href="class-level-vs-instance-level.html#cb357-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb357-5"><a href="class-level-vs-instance-level.html#cb357-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name):</span>
<span id="cb357-6"><a href="class-level-vs-instance-level.html#cb357-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.name <span class="op">=</span> name <span class="co"># instance-level attribute</span></span></code></pre></div>
<ul>
<li>在這個例子中，<code>self.name</code>叫做instance-level attribute(實例屬性)，因為他有一個instance的代名詞<code>self</code>放在前面，我們在調用這個attribute時，都是先寫instance name，才寫此屬性，例如：</li>
</ul>
<div class="sourceCode" id="cb358"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb358-1"><a href="class-level-vs-instance-level.html#cb358-1" aria-hidden="true" tabindex="-1"></a>hank <span class="op">=</span> Student(name <span class="op">=</span> <span class="st">"hank"</span>)</span>
<span id="cb358-2"><a href="class-level-vs-instance-level.html#cb358-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(hank.name)</span>
<span id="cb358-3"><a href="class-level-vs-instance-level.html#cb358-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; hank</span></span></code></pre></div>
<ul>
<li>而<code>count</code>叫做class-level attribute，他前面沒有擺<code>self</code>，所以他是屬於Class下面的屬性，而不是屬於self下面的屬性。在調用這個attribute時，要先寫class name，才寫此屬性，例如：</li>
</ul>
<div class="sourceCode" id="cb359"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb359-1"><a href="class-level-vs-instance-level.html#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Student.count)</span>
<span id="cb359-2"><a href="class-level-vs-instance-level.html#cb359-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0</span></span></code></pre></div>
</div>
<div id="實例屬性可以繼承類屬性" class="section level3" number="31.1.2">
<h3>
<span class="header-section-number">31.1.2</span> <code>實例屬性</code>可以繼承<code>類屬性</code><a class="anchor" aria-label="anchor" href="#%E5%AF%A6%E4%BE%8B%E5%B1%AC%E6%80%A7%E5%8F%AF%E4%BB%A5%E7%B9%BC%E6%89%BF%E9%A1%9E%E5%B1%AC%E6%80%A7"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>那由於階層上是class為第一層，instance為第二層，所以instance會繼承class的屬性，但class不會有instance的屬性：</li>
</ul>
<div class="sourceCode" id="cb360"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb360-1"><a href="class-level-vs-instance-level.html#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="co"># class下，沒有name這個屬性，要instance下才會有</span></span>
<span id="cb360-2"><a href="class-level-vs-instance-level.html#cb360-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Student.name)</span>
<span id="cb360-3"><a href="class-level-vs-instance-level.html#cb360-3" aria-hidden="true" tabindex="-1"></a><span class="co"># instance會繼承class的屬性，所以還是看得到count</span></span>
<span id="cb360-4"><a href="class-level-vs-instance-level.html#cb360-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in py_call_impl(callable, dots$args, dots$keywords): AttributeError: type object 'Student' has no attribute 'name'</span></span>
<span id="cb360-5"><a href="class-level-vs-instance-level.html#cb360-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb360-6"><a href="class-level-vs-instance-level.html#cb360-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Detailed traceback:</span></span>
<span id="cb360-7"><a href="class-level-vs-instance-level.html#cb360-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   File "&lt;string&gt;", line 1, in &lt;module&gt;</span></span>
<span id="cb360-8"><a href="class-level-vs-instance-level.html#cb360-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(hank.count)</span>
<span id="cb360-9"><a href="class-level-vs-instance-level.html#cb360-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0</span></span></code></pre></div>
</div>
<div id="實例屬性與類屬性的修改" class="section level3" number="31.1.3">
<h3>
<span class="header-section-number">31.1.3</span> <code>實例屬性</code>與<code>類屬性</code>的修改<a class="anchor" aria-label="anchor" href="#%E5%AF%A6%E4%BE%8B%E5%B1%AC%E6%80%A7%E8%88%87%E9%A1%9E%E5%B1%AC%E6%80%A7%E7%9A%84%E4%BF%AE%E6%94%B9"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>剛剛講到，instance會繼承class的attribute:</li>
</ul>
<div class="sourceCode" id="cb361"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb361-1"><a href="class-level-vs-instance-level.html#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Student.count)</span>
<span id="cb361-2"><a href="class-level-vs-instance-level.html#cb361-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0</span></span>
<span id="cb361-3"><a href="class-level-vs-instance-level.html#cb361-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(hank.count)</span>
<span id="cb361-4"><a href="class-level-vs-instance-level.html#cb361-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0</span></span></code></pre></div>
<ul>
<li>
<code>Student.count</code>是在講Student這個抽象的類別，他所屬的count。我們覺得，不管是哪個學生(hank or aaron or sunny…)，只要是學生，一開始的count應該都是0<br>
</li>
<li>所以，我們realize一個instance叫做hank時，<code>hank.count</code>就繼承了這個student的class給他的count，現在<code>hank.count</code>已經是hank專屬的count了。<br>
</li>
<li>那可以想像，如果我去修改instance中的count(e.g. 這邊的<code>hank.count</code>)，那就只是修改instance中的count，不會影響到class的count:</li>
</ul>
<div class="sourceCode" id="cb362"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb362-1"><a href="class-level-vs-instance-level.html#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Student.count)</span>
<span id="cb362-2"><a href="class-level-vs-instance-level.html#cb362-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0</span></span>
<span id="cb362-3"><a href="class-level-vs-instance-level.html#cb362-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(hank.count)</span>
<span id="cb362-4"><a href="class-level-vs-instance-level.html#cb362-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0</span></span>
<span id="cb362-5"><a href="class-level-vs-instance-level.html#cb362-5" aria-hidden="true" tabindex="-1"></a>hank.count <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb362-6"><a href="class-level-vs-instance-level.html#cb362-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb362-7"><a href="class-level-vs-instance-level.html#cb362-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Student.count)</span>
<span id="cb362-8"><a href="class-level-vs-instance-level.html#cb362-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0</span></span>
<span id="cb362-9"><a href="class-level-vs-instance-level.html#cb362-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(hank.count)</span>
<span id="cb362-10"><a href="class-level-vs-instance-level.html#cb362-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1</span></span></code></pre></div>
<ul>
<li>我也可以想像，如果我去改class中的count，並不會影響到instance中的count。因為改class中的count，等於只是改模板，他只會影響到”之後”我創建出來的instance而已：</li>
</ul>
<div class="sourceCode" id="cb363"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb363-1"><a href="class-level-vs-instance-level.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Student.count)</span>
<span id="cb363-2"><a href="class-level-vs-instance-level.html#cb363-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0</span></span>
<span id="cb363-3"><a href="class-level-vs-instance-level.html#cb363-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(hank.count)</span>
<span id="cb363-4"><a href="class-level-vs-instance-level.html#cb363-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1</span></span>
<span id="cb363-5"><a href="class-level-vs-instance-level.html#cb363-5" aria-hidden="true" tabindex="-1"></a>Student.count <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb363-6"><a href="class-level-vs-instance-level.html#cb363-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb363-7"><a href="class-level-vs-instance-level.html#cb363-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Student.count)</span>
<span id="cb363-8"><a href="class-level-vs-instance-level.html#cb363-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 100</span></span>
<span id="cb363-9"><a href="class-level-vs-instance-level.html#cb363-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(hank.count)</span>
<span id="cb363-10"><a href="class-level-vs-instance-level.html#cb363-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1</span></span>
<span id="cb363-11"><a href="class-level-vs-instance-level.html#cb363-11" aria-hidden="true" tabindex="-1"></a>sunny <span class="op">=</span> Student(name <span class="op">=</span> <span class="st">'sunny'</span>)</span>
<span id="cb363-12"><a href="class-level-vs-instance-level.html#cb363-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sunny.count)</span>
<span id="cb363-13"><a href="class-level-vs-instance-level.html#cb363-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 100</span></span></code></pre></div>
</div>
<div id="類屬性用在哪" class="section level3" number="31.1.4">
<h3>
<span class="header-section-number">31.1.4</span> <code>類屬性</code>用在哪<a class="anchor" aria-label="anchor" href="#%E9%A1%9E%E5%B1%AC%E6%80%A7%E7%94%A8%E5%9C%A8%E5%93%AA"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>對於instance-level attribute(實例屬性)我們蠻熟了，他主要就是給method做使用。那class-level attribute是用在哪呢？這邊舉兩個實例：</li>
</ul>
<div id="統計這個class被用過幾次" class="section level4" number="31.1.4.1">
<h4>
<span class="header-section-number">31.1.4.1</span> 統計這個class被用過幾次<a class="anchor" aria-label="anchor" href="#%E7%B5%B1%E8%A8%88%E9%80%99%E5%80%8Bclass%E8%A2%AB%E7%94%A8%E9%81%8E%E5%B9%BE%E6%AC%A1"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>有時候我們會想統計一下，某個class被實體化過幾次，那就可以像下面這樣寫：</li>
</ul>
<div class="sourceCode" id="cb364"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb364-1"><a href="class-level-vs-instance-level.html#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Student:</span>
<span id="cb364-2"><a href="class-level-vs-instance-level.html#cb364-2" aria-hidden="true" tabindex="-1"></a>  count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb364-3"><a href="class-level-vs-instance-level.html#cb364-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name):</span>
<span id="cb364-4"><a href="class-level-vs-instance-level.html#cb364-4" aria-hidden="true" tabindex="-1"></a>    Student.count <span class="op">=</span> Student.count <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb364-5"><a href="class-level-vs-instance-level.html#cb364-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.name <span class="op">=</span> name</span></code></pre></div>
<ul>
<li>從上面這段code，可以看到我們把<code>Student.count = Student.count + 1</code>放在<code>__init__</code>的下面。那每次在實體化一個instance時，count數就會增加：</li>
</ul>
<div class="sourceCode" id="cb365"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb365-1"><a href="class-level-vs-instance-level.html#cb365-1" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> Student(<span class="st">"A"</span>)</span>
<span id="cb365-2"><a href="class-level-vs-instance-level.html#cb365-2" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> Student(<span class="st">"B"</span>)</span>
<span id="cb365-3"><a href="class-level-vs-instance-level.html#cb365-3" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> Student(<span class="st">"C"</span>)</span>
<span id="cb365-4"><a href="class-level-vs-instance-level.html#cb365-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb365-5"><a href="class-level-vs-instance-level.html#cb365-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Student.count)</span>
<span id="cb365-6"><a href="class-level-vs-instance-level.html#cb365-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3</span></span></code></pre></div>
</div>
<div id="跨instance都應該一樣的特徵" class="section level4" number="31.1.4.2">
<h4>
<span class="header-section-number">31.1.4.2</span> 跨instance都應該一樣的特徵<a class="anchor" aria-label="anchor" href="#%E8%B7%A8instance%E9%83%BD%E6%87%89%E8%A9%B2%E4%B8%80%E6%A8%A3%E7%9A%84%E7%89%B9%E5%BE%B5"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>舉例來說，今天我要做一個Employee的class，裡面有個attribute叫<code>MIN_SALARY</code>。那這個最低薪資，其實是法律規範的22k，只要你是員工，不管你叫阿貓還是阿狗，最低薪資都應該一樣。那這種attribute我們就會寫在class下面。<br>
</li>
<li>這樣做的一個優點是省力，另一個優點是可以幫我們做卡控: 以下舉個例子，當我們實體化一個employee時，要輸入該員工的name與salary。但只要這個salary小於MIN_SALARY，我就要用MIN_SALARY做取代：</li>
</ul>
<div class="sourceCode" id="cb366"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb366-1"><a href="class-level-vs-instance-level.html#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Employee:</span>
<span id="cb366-2"><a href="class-level-vs-instance-level.html#cb366-2" aria-hidden="true" tabindex="-1"></a>  MIN_SALARY <span class="op">=</span> <span class="dv">22000</span></span>
<span id="cb366-3"><a href="class-level-vs-instance-level.html#cb366-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, salary):</span>
<span id="cb366-4"><a href="class-level-vs-instance-level.html#cb366-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb366-5"><a href="class-level-vs-instance-level.html#cb366-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> salary <span class="op">&lt;</span> Employee.MIN_SALARY:</span>
<span id="cb366-6"><a href="class-level-vs-instance-level.html#cb366-6" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Please respect people. The salary you give is lower than 22K !!"</span>)</span>
<span id="cb366-7"><a href="class-level-vs-instance-level.html#cb366-7" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.salary <span class="op">=</span> Employee.MIN_SALARY</span>
<span id="cb366-8"><a href="class-level-vs-instance-level.html#cb366-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb366-9"><a href="class-level-vs-instance-level.html#cb366-9" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.salary <span class="op">=</span> salary</span></code></pre></div>
<ul>
<li>來做個實驗吧：</li>
</ul>
<div class="sourceCode" id="cb367"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb367-1"><a href="class-level-vs-instance-level.html#cb367-1" aria-hidden="true" tabindex="-1"></a>sunny <span class="op">=</span> Employee(name <span class="op">=</span> <span class="st">"sunny"</span>, salary <span class="op">=</span> <span class="dv">10000</span>)</span>
<span id="cb367-2"><a href="class-level-vs-instance-level.html#cb367-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Please respect people. The salary you give is lower than 22K !!</span></span>
<span id="cb367-3"><a href="class-level-vs-instance-level.html#cb367-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sunny.salary)</span>
<span id="cb367-4"><a href="class-level-vs-instance-level.html#cb367-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 22000</span></span>
<span id="cb367-5"><a href="class-level-vs-instance-level.html#cb367-5" aria-hidden="true" tabindex="-1"></a>hank <span class="op">=</span> Employee(name <span class="op">=</span> <span class="st">"sunny"</span>, salary <span class="op">=</span> <span class="dv">60000</span>)</span>
<span id="cb367-6"><a href="class-level-vs-instance-level.html#cb367-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(hank.salary)</span>
<span id="cb367-7"><a href="class-level-vs-instance-level.html#cb367-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 60000</span></span></code></pre></div>
</div>
</div>
</div>
<div id="instance-level-method-vs-class-level-method" class="section level2" number="31.2">
<h2>
<span class="header-section-number">31.2</span> Instance-level method vs Class-level method<a class="anchor" aria-label="anchor" href="#instance-level-method-vs-class-level-method"><i class="fas fa-link"></i></a>
</h2>
<div id="簡介類方法和實例方法" class="section level3" number="31.2.1">
<h3>
<span class="header-section-number">31.2.1</span> 簡介<code>類方法</code>和<code>實例方法</code><a class="anchor" aria-label="anchor" href="#%E7%B0%A1%E4%BB%8B%E9%A1%9E%E6%96%B9%E6%B3%95%E5%92%8C%E5%AF%A6%E4%BE%8B%E6%96%B9%E6%B3%95"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>首先我們複習一下實例方法(instance-level method)</li>
</ul>
<div class="sourceCode" id="cb368"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb368-1"><a href="class-level-vs-instance-level.html#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> People:</span>
<span id="cb368-2"><a href="class-level-vs-instance-level.html#cb368-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, age):</span>
<span id="cb368-3"><a href="class-level-vs-instance-level.html#cb368-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb368-4"><a href="class-level-vs-instance-level.html#cb368-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.age <span class="op">=</span> age</span>
<span id="cb368-5"><a href="class-level-vs-instance-level.html#cb368-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb368-6"><a href="class-level-vs-instance-level.html#cb368-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> sayhi(<span class="va">self</span>, v1):</span>
<span id="cb368-7"><a href="class-level-vs-instance-level.html#cb368-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(<span class="ss">f"Hi, my name is </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>name<span class="sc">}</span><span class="ss">, and I'm </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>age<span class="sc">}</span><span class="ss"> year's old. </span><span class="sc">{v1}</span><span class="ss"> is here"</span>)</span>
<span id="cb368-8"><a href="class-level-vs-instance-level.html#cb368-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb368-9"><a href="class-level-vs-instance-level.html#cb368-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> sayhi2(<span class="va">self</span>, v1):</span>
<span id="cb368-10"><a href="class-level-vs-instance-level.html#cb368-10" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> <span class="va">self</span>.sayhi(v1)</span>
<span id="cb368-11"><a href="class-level-vs-instance-level.html#cb368-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(res)</span></code></pre></div>
<ul>
<li>裡面的<code>sayhi(self, v1)</code>就是一實例方法，因為他需要傳入<code>self</code>這個參數，好讓他在method裡面可以呼叫<code>self.name</code>, <code>self.age</code>這兩個instance-level attribute<br>
</li>
<li>而<code>sayhi2(self, v1)</code>同樣是個實例方法，這邊就顯示我們要呼叫實例方法時，也得用self，如同這邊用到<code>self.sayhi</code>這個method<br>
</li>
<li>那舉一反三，class-level method，傳入的參數就該從<code>self</code>改成<code>class</code>? 答案很接近了，用的參數名稱叫<code>cls</code>而不是<code>class</code>。而且，還要在定義method的前面，加個decorator: <code>@classmethod</code><br>
</li>
<li>看例子：</li>
</ul>
<div class="sourceCode" id="cb369"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb369-1"><a href="class-level-vs-instance-level.html#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> People:</span>
<span id="cb369-2"><a href="class-level-vs-instance-level.html#cb369-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, age):</span>
<span id="cb369-3"><a href="class-level-vs-instance-level.html#cb369-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb369-4"><a href="class-level-vs-instance-level.html#cb369-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.age <span class="op">=</span> age</span>
<span id="cb369-5"><a href="class-level-vs-instance-level.html#cb369-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb369-6"><a href="class-level-vs-instance-level.html#cb369-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> sayhi(<span class="va">self</span>, v1):</span>
<span id="cb369-7"><a href="class-level-vs-instance-level.html#cb369-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(<span class="ss">f"Hi, my name is </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>name<span class="sc">}</span><span class="ss">, and I'm </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>age<span class="sc">}</span><span class="ss"> year's old. </span><span class="sc">{v1}</span><span class="ss"> is here"</span>)</span>
<span id="cb369-8"><a href="class-level-vs-instance-level.html#cb369-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb369-9"><a href="class-level-vs-instance-level.html#cb369-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> sayhi2(<span class="va">self</span>, v1):</span>
<span id="cb369-10"><a href="class-level-vs-instance-level.html#cb369-10" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> <span class="va">self</span>.sayhi(v1)</span>
<span id="cb369-11"><a href="class-level-vs-instance-level.html#cb369-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(res)</span>
<span id="cb369-12"><a href="class-level-vs-instance-level.html#cb369-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb369-13"><a href="class-level-vs-instance-level.html#cb369-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">@classmethod</span></span>
<span id="cb369-14"><a href="class-level-vs-instance-level.html#cb369-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> test1(cls):</span>
<span id="cb369-15"><a href="class-level-vs-instance-level.html#cb369-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(<span class="st">"這是一個類方法"</span>)</span></code></pre></div>
<ul>
<li>那定義好這個<code>類方法</code>後，我們從外部就不需要先realize一個instance，就可以用這個方法了:</li>
</ul>
<div class="sourceCode" id="cb370"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb370-1"><a href="class-level-vs-instance-level.html#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(People.test1())</span>
<span id="cb370-2"><a href="class-level-vs-instance-level.html#cb370-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 這是一個類方法</span></span></code></pre></div>
<ul>
<li>而且，如同實例屬性會繼承類屬性一樣，實例方法也會繼承類方法，所以當我realize一個instance後，我還是可以調用這個method:</li>
</ul>
<div class="sourceCode" id="cb371"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb371-1"><a href="class-level-vs-instance-level.html#cb371-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> People(name <span class="op">=</span> <span class="st">"hank"</span>, age <span class="op">=</span> <span class="dv">28</span>)</span>
<span id="cb371-2"><a href="class-level-vs-instance-level.html#cb371-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p1.test1())</span>
<span id="cb371-3"><a href="class-level-vs-instance-level.html#cb371-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 這是一個類方法</span></span></code></pre></div>
<ul>
<li>那最後講一下，instance-level method時，你傳入<code>self</code>參數，是為了用<code>self.name</code>, <code>self.age</code>這些instance-level attribute，或是用<code>self.sayhi()</code>這種instance-level method。那class-level method時，你傳入<code>cls</code>參數，是為了調用<code>cls.XXX</code>的class-level attribute嗎？<br>
</li>
<li>顯然不是，因為class-level attribute的調用，是用<code>{class名稱}.{attribute名稱}</code>。所以，<code>cls</code>參數要調用的，是其他class method!!<br>
</li>
<li>例如下例：</li>
</ul>
<div class="sourceCode" id="cb372"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb372-1"><a href="class-level-vs-instance-level.html#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> People:</span>
<span id="cb372-2"><a href="class-level-vs-instance-level.html#cb372-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, age):</span>
<span id="cb372-3"><a href="class-level-vs-instance-level.html#cb372-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb372-4"><a href="class-level-vs-instance-level.html#cb372-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.age <span class="op">=</span> age</span>
<span id="cb372-5"><a href="class-level-vs-instance-level.html#cb372-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb372-6"><a href="class-level-vs-instance-level.html#cb372-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> sayhi(<span class="va">self</span>, v1):</span>
<span id="cb372-7"><a href="class-level-vs-instance-level.html#cb372-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(<span class="ss">f"Hi, my name is </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>name<span class="sc">}</span><span class="ss">, and I'm </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>age<span class="sc">}</span><span class="ss"> year's old. </span><span class="sc">{v1}</span><span class="ss"> is here"</span>)</span>
<span id="cb372-8"><a href="class-level-vs-instance-level.html#cb372-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb372-9"><a href="class-level-vs-instance-level.html#cb372-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> sayhi2(<span class="va">self</span>, v1):</span>
<span id="cb372-10"><a href="class-level-vs-instance-level.html#cb372-10" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> <span class="va">self</span>.sayhi(v1)</span>
<span id="cb372-11"><a href="class-level-vs-instance-level.html#cb372-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(res)</span>
<span id="cb372-12"><a href="class-level-vs-instance-level.html#cb372-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb372-13"><a href="class-level-vs-instance-level.html#cb372-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">@classmethod</span></span>
<span id="cb372-14"><a href="class-level-vs-instance-level.html#cb372-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> test1(cls):</span>
<span id="cb372-15"><a href="class-level-vs-instance-level.html#cb372-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(<span class="st">"這是一個類方法"</span>)</span>
<span id="cb372-16"><a href="class-level-vs-instance-level.html#cb372-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb372-17"><a href="class-level-vs-instance-level.html#cb372-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">@classmethod</span></span>
<span id="cb372-18"><a href="class-level-vs-instance-level.html#cb372-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> test2(cls):</span>
<span id="cb372-19"><a href="class-level-vs-instance-level.html#cb372-19" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> cls.test1()</span>
<span id="cb372-20"><a href="class-level-vs-instance-level.html#cb372-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(res)</span>
<span id="cb372-21"><a href="class-level-vs-instance-level.html#cb372-21" aria-hidden="true" tabindex="-1"></a>  </span></code></pre></div>
<ul>
<li>從這個例子可以看到，我的<code>test2</code>，調用了<code>cls.test1</code>這個class-level method。來看看結果對不對：</li>
</ul>
<div class="sourceCode" id="cb373"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb373-1"><a href="class-level-vs-instance-level.html#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(People.test2())</span>
<span id="cb373-2"><a href="class-level-vs-instance-level.html#cb373-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 這是一個類方法</span></span></code></pre></div>
<ul>
<li>最後，我們無法在類方法中，去調用實例方法。例如我現在寫個test3，裡面想要調用self.sayhi</li>
</ul>
<div class="sourceCode" id="cb374"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb374-1"><a href="class-level-vs-instance-level.html#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> People:</span>
<span id="cb374-2"><a href="class-level-vs-instance-level.html#cb374-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, age):</span>
<span id="cb374-3"><a href="class-level-vs-instance-level.html#cb374-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb374-4"><a href="class-level-vs-instance-level.html#cb374-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.age <span class="op">=</span> age</span>
<span id="cb374-5"><a href="class-level-vs-instance-level.html#cb374-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb374-6"><a href="class-level-vs-instance-level.html#cb374-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> sayhi(<span class="va">self</span>, v1):</span>
<span id="cb374-7"><a href="class-level-vs-instance-level.html#cb374-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(<span class="ss">f"Hi, my name is </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>name<span class="sc">}</span><span class="ss">, and I'm </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>age<span class="sc">}</span><span class="ss"> year's old. </span><span class="sc">{v1}</span><span class="ss"> is here"</span>)</span>
<span id="cb374-8"><a href="class-level-vs-instance-level.html#cb374-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb374-9"><a href="class-level-vs-instance-level.html#cb374-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> sayhi2(<span class="va">self</span>, v1):</span>
<span id="cb374-10"><a href="class-level-vs-instance-level.html#cb374-10" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> <span class="va">self</span>.sayhi(v1)</span>
<span id="cb374-11"><a href="class-level-vs-instance-level.html#cb374-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(res)</span>
<span id="cb374-12"><a href="class-level-vs-instance-level.html#cb374-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb374-13"><a href="class-level-vs-instance-level.html#cb374-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">@classmethod</span></span>
<span id="cb374-14"><a href="class-level-vs-instance-level.html#cb374-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> test1(cls):</span>
<span id="cb374-15"><a href="class-level-vs-instance-level.html#cb374-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(<span class="st">"這是一個類方法"</span>)</span>
<span id="cb374-16"><a href="class-level-vs-instance-level.html#cb374-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb374-17"><a href="class-level-vs-instance-level.html#cb374-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">@classmethod</span></span>
<span id="cb374-18"><a href="class-level-vs-instance-level.html#cb374-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> test2(cls):</span>
<span id="cb374-19"><a href="class-level-vs-instance-level.html#cb374-19" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> cls.test1()</span>
<span id="cb374-20"><a href="class-level-vs-instance-level.html#cb374-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(res)</span>
<span id="cb374-21"><a href="class-level-vs-instance-level.html#cb374-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb374-22"><a href="class-level-vs-instance-level.html#cb374-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">@classmethod</span></span>
<span id="cb374-23"><a href="class-level-vs-instance-level.html#cb374-23" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> test3(cls, v1):</span>
<span id="cb374-24"><a href="class-level-vs-instance-level.html#cb374-24" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> <span class="va">self</span>.sayhi(v1)</span>
<span id="cb374-25"><a href="class-level-vs-instance-level.html#cb374-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(res)</span></code></pre></div>
<ul>
<li>實驗一下：</li>
</ul>
<div class="sourceCode" id="cb375"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb375-1"><a href="class-level-vs-instance-level.html#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(People.test3(v1 <span class="op">=</span> <span class="st">"hahaha"</span>))</span>
<span id="cb375-2"><a href="class-level-vs-instance-level.html#cb375-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in py_call_impl(callable, dots$args, dots$keywords): NameError: name 'self' is not defined</span></span>
<span id="cb375-3"><a href="class-level-vs-instance-level.html#cb375-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb375-4"><a href="class-level-vs-instance-level.html#cb375-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Detailed traceback:</span></span>
<span id="cb375-5"><a href="class-level-vs-instance-level.html#cb375-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   File "&lt;string&gt;", line 1, in &lt;module&gt;</span></span>
<span id="cb375-6"><a href="class-level-vs-instance-level.html#cb375-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   File "&lt;string&gt;", line 24, in test3</span></span></code></pre></div>
<ul>
<li>如同預期，報error了，而且error message也很合理：沒找到self拉！啊廢話，你這是class-level method，給的參數是<code>cls</code>又不是<code>self</code>，當然無法去吃<code>self.sayhi()</code>這個instance-level method<br>
</li>
<li>而且，就算你實體化這個class，還是不能調用<code>self.sayhi()</code>，因為你的<code>self</code>從頭到尾都沒被當作參數丟入<code>test3</code>裡面：</li>
</ul>
<div class="sourceCode" id="cb376"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb376-1"><a href="class-level-vs-instance-level.html#cb376-1" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> People(name <span class="op">=</span> <span class="st">"hank"</span>, age <span class="op">=</span> <span class="dv">28</span>)</span>
<span id="cb376-2"><a href="class-level-vs-instance-level.html#cb376-2" aria-hidden="true" tabindex="-1"></a>p2.test3(v1 <span class="op">=</span> <span class="st">"hahaha"</span>)</span>
<span id="cb376-3"><a href="class-level-vs-instance-level.html#cb376-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in py_call_impl(callable, dots$args, dots$keywords): NameError: name 'self' is not defined</span></span>
<span id="cb376-4"><a href="class-level-vs-instance-level.html#cb376-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb376-5"><a href="class-level-vs-instance-level.html#cb376-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Detailed traceback:</span></span>
<span id="cb376-6"><a href="class-level-vs-instance-level.html#cb376-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   File "&lt;string&gt;", line 1, in &lt;module&gt;</span></span>
<span id="cb376-7"><a href="class-level-vs-instance-level.html#cb376-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   File "&lt;string&gt;", line 24, in test3</span></span></code></pre></div>
</div>
<div id="實例屬性的使用時機" class="section level3" number="31.2.2">
<h3>
<span class="header-section-number">31.2.2</span> 實例屬性的使用時機<a class="anchor" aria-label="anchor" href="#%E5%AF%A6%E4%BE%8B%E5%B1%AC%E6%80%A7%E7%9A%84%E4%BD%BF%E7%94%A8%E6%99%82%E6%A9%9F"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>那到底class method可以拿來幹麻？其實最常是拿來作為initialize instance的另一種方式，例如，我的class如果本來要initialize一個instance時，要輸入year, month, day這三個參數，但我現在希望提供另一種initialize的方式，是直接給字串(e.g. “2020-10-20”)就好，我該怎麼做？只有一個<code>__init__</code>可以用，又不能寫兩個，這時候，就會用class method<br>
</li>
<li>直接看例子。今天我想寫一個class叫<code>BetterDate</code>，有year, month, day三個attribute。那我現在想寫一個class method，只要給字串，我一樣initialize instance給你：</li>
</ul>
<div class="sourceCode" id="cb377"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb377-1"><a href="class-level-vs-instance-level.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BetterDate:    </span>
<span id="cb377-2"><a href="class-level-vs-instance-level.html#cb377-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Constructor</span></span>
<span id="cb377-3"><a href="class-level-vs-instance-level.html#cb377-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, year, month, day):</span>
<span id="cb377-4"><a href="class-level-vs-instance-level.html#cb377-4" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Recall that Python allows multiple variable assignments in one line</span></span>
<span id="cb377-5"><a href="class-level-vs-instance-level.html#cb377-5" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.year, <span class="va">self</span>.month, <span class="va">self</span>.day <span class="op">=</span> year, month, day</span>
<span id="cb377-6"><a href="class-level-vs-instance-level.html#cb377-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb377-7"><a href="class-level-vs-instance-level.html#cb377-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Define a class method from_str</span></span>
<span id="cb377-8"><a href="class-level-vs-instance-level.html#cb377-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">@classmethod</span></span>
<span id="cb377-9"><a href="class-level-vs-instance-level.html#cb377-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> from_str(cls, datestr):</span>
<span id="cb377-10"><a href="class-level-vs-instance-level.html#cb377-10" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Split the string at "-" and convert each part to integer</span></span>
<span id="cb377-11"><a href="class-level-vs-instance-level.html#cb377-11" aria-hidden="true" tabindex="-1"></a>        parts <span class="op">=</span> datestr.split(<span class="st">"-"</span>)</span>
<span id="cb377-12"><a href="class-level-vs-instance-level.html#cb377-12" aria-hidden="true" tabindex="-1"></a>        year, month, day <span class="op">=</span> <span class="bu">int</span>(parts[<span class="dv">0</span>]), <span class="bu">int</span>(parts[<span class="dv">1</span>]), <span class="bu">int</span>(parts[<span class="dv">2</span>])</span>
<span id="cb377-13"><a href="class-level-vs-instance-level.html#cb377-13" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Return the class instance</span></span>
<span id="cb377-14"><a href="class-level-vs-instance-level.html#cb377-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> cls(year, month, day)</span></code></pre></div>
<ul>
<li>注意到最後的<code>cls(year, month, day)</code>，他的意思就是會把這三個參數傳回<code>__init__</code>來initialize instance的意思。所以，現在試試看結果：</li>
</ul>
<div class="sourceCode" id="cb378"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb378-1"><a href="class-level-vs-instance-level.html#cb378-1" aria-hidden="true" tabindex="-1"></a>bd <span class="op">=</span> BetterDate.from_str(<span class="st">'2020-04-30'</span>)   </span>
<span id="cb378-2"><a href="class-level-vs-instance-level.html#cb378-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bd.year)</span>
<span id="cb378-3"><a href="class-level-vs-instance-level.html#cb378-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2020</span></span>
<span id="cb378-4"><a href="class-level-vs-instance-level.html#cb378-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bd.month)</span>
<span id="cb378-5"><a href="class-level-vs-instance-level.html#cb378-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4</span></span>
<span id="cb378-6"><a href="class-level-vs-instance-level.html#cb378-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bd.day)</span>
<span id="cb378-7"><a href="class-level-vs-instance-level.html#cb378-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 30</span></span></code></pre></div>
</div>
</div>
<div id="小結" class="section level2" number="31.3">
<h2>
<span class="header-section-number">31.3</span> 小結<a class="anchor" aria-label="anchor" href="#%E5%B0%8F%E7%B5%90"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>剛剛講了類屬性和實例屬性，我們學到類屬性在實體化之前就可以調用，調用的方式是<code>{class名稱}.{attribute名稱}</code>
</li>
<li>類屬性當然也可以在class的內部去調用它，一樣是用<code>{class名稱}.{attribute名稱}</code><br>
</li>
<li>實例屬性，在內部的調用是用<code>self.{attribute名稱}</code>，因為在內部時還不知道實體化後的名稱，所以都用<code>self</code>來當代名詞<br>
</li>
<li>實例屬性，在外部的調用是用<code>{instance名稱}.{attribute名稱}</code><br>
</li>
<li>類方法和實例方法概念也都一樣：
<ul>
<li>實例方法：內部的調用是用<code>self.{method名稱}(參數)</code>，外部的調用是<code>{instance名稱}.{method名稱}(參數)</code><br>
</li>
<li>類方法：內部的調用適用<code>cls.{method名稱}(參數)</code>，外部調用是<code>{class名稱}.{method名稱}(參數)</code>
</li>
</ul>
</li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="oop-fundamentals.html"><span class="header-section-number">30</span> OOP Fundamentals</a></div>
<div class="next"><a href="attribute-protection.html"><span class="header-section-number">32</span> Attribute Protection</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#class-level-vs-instance-level"><span class="header-section-number">31</span> Class-level vs Instance-level</a></li>
<li>
<a class="nav-link" href="#instance-level-attribute-vs-class-level-attribute"><span class="header-section-number">31.1</span> Instance-level attribute vs Class-level attribute</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E7%B0%A1%E4%BB%8B%E5%AF%A6%E4%BE%8B%E5%B1%AC%E6%80%A7%E8%88%87%E9%A1%9E%E5%B1%AC%E6%80%A7"><span class="header-section-number">31.1.1</span> 簡介實例屬性與類屬性</a></li>
<li><a class="nav-link" href="#%E5%AF%A6%E4%BE%8B%E5%B1%AC%E6%80%A7%E5%8F%AF%E4%BB%A5%E7%B9%BC%E6%89%BF%E9%A1%9E%E5%B1%AC%E6%80%A7"><span class="header-section-number">31.1.2</span> 實例屬性可以繼承類屬性</a></li>
<li><a class="nav-link" href="#%E5%AF%A6%E4%BE%8B%E5%B1%AC%E6%80%A7%E8%88%87%E9%A1%9E%E5%B1%AC%E6%80%A7%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="header-section-number">31.1.3</span> 實例屬性與類屬性的修改</a></li>
<li><a class="nav-link" href="#%E9%A1%9E%E5%B1%AC%E6%80%A7%E7%94%A8%E5%9C%A8%E5%93%AA"><span class="header-section-number">31.1.4</span> 類屬性用在哪</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#instance-level-method-vs-class-level-method"><span class="header-section-number">31.2</span> Instance-level method vs Class-level method</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E7%B0%A1%E4%BB%8B%E9%A1%9E%E6%96%B9%E6%B3%95%E5%92%8C%E5%AF%A6%E4%BE%8B%E6%96%B9%E6%B3%95"><span class="header-section-number">31.2.1</span> 簡介類方法和實例方法</a></li>
<li><a class="nav-link" href="#%E5%AF%A6%E4%BE%8B%E5%B1%AC%E6%80%A7%E7%9A%84%E4%BD%BF%E7%94%A8%E6%99%82%E6%A9%9F"><span class="header-section-number">31.2.2</span> 實例屬性的使用時機</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%E5%B0%8F%E7%B5%90"><span class="header-section-number">31.3</span> 小結</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/LeeHank/python_tutorial/blob/master/class_instance_level.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/LeeHank/python_tutorial/edit/master/class_instance_level.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Python Tutorial</strong>" was written by Hank Lee. It was last built on 2022-01-08.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
